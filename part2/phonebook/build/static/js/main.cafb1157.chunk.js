(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){e.exports={error:"Notification_error__3R2sS"}},20:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(1),c=n.n(a),o=n(3),u=n(4),s=n(0),l=n.n(s),i=n(18),p=n.n(i);var f=function(e){var t=e.value,n=e.onChangeComp,r=e.type,a=e.label;return l.a.createElement(l.a.Fragment,null," ",a,":"," ",l.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)},type:r}))};var m=function(e){var t=e.filterValue,n=e.setfilterValue;return l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(f,{type:"text",value:t,onChangeComp:n,label:"filter shown with"})," ")};var d=function(e){var t=e.persons,n=e.filterValue,r=e.personHandleDelete;return t.length>0&&!n?t.map((function(e){return l.a.createElement("p",{key:e.name},e.name," : ",e.phoneNumber,l.a.createElement("button",{style:{marginLeft:"20px"},onClick:function(){return r(e._id,e.name)}},"delete"))})):t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return l.a.createElement("p",{key:e.name},e.name," : ",e.phoneNumber)}))},v=n(19),b=n.n(v);var h=function(e){var t=e.message,n=e.color;return t?l.a.createElement("div",{className:b.a.error,style:{color:n}},t):null},x=n(6),w=n.n(x),y="https://shielded-escarpment-66552.herokuapp.com/api/persons",g=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(y);case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(y,t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0.response.data.error;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.patch("".concat(y,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response.data.error;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("".concat(y,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(null),p=Object(u.a)(i,2),v=p[0],b=p[1],x=Object(s.useState)(null),w=Object(u.a)(x,2),y=w[0],j=w[1],C=Object(s.useState)(""),S=Object(u.a)(C,2),N=S[0],_=S[1],D=Object(s.useState)(""),V=Object(u.a)(D,2),B=V[0],L=V[1],H=Object(s.useState)(""),I=Object(u.a)(H,2),J=I[0],P=I[1];Object(s.useEffect)((function(){(function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,a(t.doc);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var A=function(){var e=Object(o.a)(c.a.mark((function e(t){var o,u,s,l,i,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o={name:N,phoneNumber:B},!n.some((function(e){return e.name===N}))){e.next=26;break}if(b(null),!window.confirm("".concat(N," is already addded to phonebook,DO you want to replace the old number with a new one"))){e.next=24;break}return e.prev=6,u=n.filter((function(e){return e.name===N})),s=u[0]._id,e.next=11,E(s,o);case 11:l=e.sent,i=n.filter((function(e){return e._id!==s})),a([].concat(Object(r.a)(i),[l.doc])),b("Changed number of ".concat(N," successfully")),j("green"),_(""),L(""),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),b(e.t0),j("red");case 24:e.next=43;break;case 26:return e.prev=26,e.next=29,k(o);case 29:return p=e.sent,console.log(p.data.data.doc),e.next=33,a([].concat(Object(r.a)(n),[p.data.data.doc]));case 33:b(" Added ".concat(N," successfully")),j("green"),_(""),L(""),e.next=43;break;case 39:e.prev=39,e.t1=e.catch(26),b(e.t1),j("red");case 43:case"end":return e.stop()}}),e,null,[[6,20],[26,39]])})));return function(t){return e.apply(this,arguments)}}();v&&setTimeout((function(){b(null)}),5e3);var F=function(){var e=Object(o.a)(c.a.mark((function e(t,r){var o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to Delete ".concat(r," ?"))){e.next=19;break}return e.prev=2,e.next=5,O(t);case 5:return o=e.sent,console.log(o),u=n.filter((function(e){return e._id!==t})),e.next=10,a(u);case 10:j("green"),b("Successfully deleted"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j("red"),b("Information of this person has already been removed from the server. Please refresh the page"),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(h,{message:v,color:y}),l.a.createElement("h2",null,"Phonebook"),l.a.createElement(m,{value:J,setfilterValue:P}),l.a.createElement("form",{onSubmit:A},l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(f,{label:"name",value:N,onChangeComp:_,type:"text"})),l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(f,{label:"phoneNumber",value:B,onChangeComp:L,type:"number"})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add"))),l.a.createElement("h2",null,"Numbers"),l.a.createElement(d,{persons:n,filterValue:J,personHandleDelete:F}))};t.default=j;p.a.render(l.a.createElement(j,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.cafb1157.chunk.js.map